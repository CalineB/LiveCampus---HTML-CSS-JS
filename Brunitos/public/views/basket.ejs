<%- include('./partials/header.ejs')  %>

<main class="basket_main">
  <h1 class="basket_title" data-translate="basket.title">Panier<i class="qnt many_article"><%= basketCount %> articles</i></h1>

  <section class="basket_articles inBasket">
    <% if (basket && basket.length > 0) { %>
      <% basket.forEach(function(item, index) { %>
        <div class="article toBuy">
          <img src="<%= item.image %>" alt="product_image">
          <div class="art_qnt">
            <p class="art_name" data-translate="basket.art:id_name"><%= item.name %></p>
            <input type="number" class="quantity" value="<%= item.quantity %>" min="1" data-index="<%= index %>">
          </div>
          <span class="price art_price">€ <%= item.price.toFixed(2) %></span>
          <button class="remove" data-index="<%= index %>">
            <i class="bx bx-trash"></i>
          </button>          
        </div>
      <% }) %>
    <% } else { %>
      <p>Aucun article dans votre panier.</p>
    <% } %>
  </section>

  <section class="sum">
    <h4 class="paiement" data-translate="basket.payment">Paiement</h4>

    <table class="sum_details">
      <tbody>
        <tr>
          <th class="total_article total" data-translate="basket.articles_price">Total HT </th>
          <td class="price ht_price">€ <%= totalWithoutTax.toFixed(2) %></td>
        </tr>

        <tr>
          <th class="total_livraison total" data-translate="basket.delivery" data-translate="basket.articles_price">Livraison</th>
          <td class="price shipp_price">€ <%= shippingCost.toFixed(2) %></td>
        </tr>

        <tr>
          <th class="total_taxes total" data-translate="basket.taxes">TVA</th>
          <td class="price vat_value">€ <%= vat.toFixed(2) %></td>
        </tr>

        <tr class="TTC">
          <th class="total_ttc total" data-translate="basket.vat">Total TTC</th>
          <td class="total_ttc price ttc_price">€ <%= totalWithTax.toFixed(2) %></td>
        </tr>
      </tbody>
    </table>

    <button class="next" onclick="window.location.href='/commander'" data-translate="basket.next">Poursuivre<i class='bx bxs-arrow-from-left' style='color:white'></i></button>
  </section>

</main>

<script src="../../script/products.js"></script>


<%- include('./partials/footer.ejs')  %>
